Options All -ExecCGI -Indexes -Includes +FollowSymLinks

RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://%1/$1 [R=301,L]
RewriteCond %{SERVER_PORT} !^443$
RewriteRule .* https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]

<IfModule mod_setenvif.c>
	SetEnv TZ Asia/Tbilisi
</IfModule>
ServerSignature Off
AddCharset UTF-8 .html .php .css .js
AddDefaultCharset UTF-8

<ifModule mod_php.c>
  php_value	upload_max_filesize	32M
  php_value	post_max_size		10M
  php_value	default_charset utf-8
</ifModule>

<ifModule mod_headers.c>
	#кэшировать css, javascript и текстовые файлы на одну неделю
	#<FilesMatch "\.(js|css|txt)$">
		#Header set Cache-Control "max-age=604800"
	#</FilesMatch>
	#кэшировать флэш и изображения на месяц
	#<FilesMatch "\.(flv|swf|ico|gif|jpg|jpeg|png)$">
		#Header set Cache-Control "max-age=2592000"
	#</FilesMatch>
	#отключить кэширование
	<FilesMatch "\.(pl|php|cgi|spl|scgi|fcgi|js|css|txt)$">
		Header unset Cache-Control
	</FilesMatch>
</IfModule>

<ifModule mod_expires.c>
	ExpiresActive On
	#по умолчанию кеш в 5 секунд
	ExpiresDefault "access plus 5 seconds"
	#кэшировать флэш и изображения на месяц
	ExpiresByType image/x-icon "access plus 2592000 seconds"
	ExpiresByType image/jpeg "access plus 2592000 seconds"
	ExpiresByType image/png "access plus 2592000 seconds"
	ExpiresByType image/gif "access plus 2592000 seconds"
	ExpiresByType application/x-shockwave-flash "access plus 2592000 seconds"
	#кэшировать css, javascript и текстовые файлы на одну неделю
	#ExpiresByType text/css "access plus 604800 seconds"
	#ExpiresByType text/javascript "access plus 604800 seconds"
	#ExpiresByType application/javascript "access plus 604800 seconds"
	#ExpiresByType application/x-javascript "access plus 604800 seconds"
	#кэшировать html и htm файлы на один день
	#ExpiresByType text/html "access plus 43200 seconds"
	#кэшировать xml файлы на десять минут
	ExpiresByType application/xhtml+xml "access plus 600 seconds"
</ifModule>

#Включает отслеживание сим-ссылок
Options +FollowSymLinks
#Запускает url_rewriting
RewriteEngine On
#Блокирует все ссылки, содержащие <script>
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
#Блокирует все скрипты, которые пытаются изменить переменные PHP Globals:
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
#Блокирует все скрипты, которые пытаются изменить переменную _REQUEST:
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
#Перенаправляет все подобные попытки на страницу с ошибкой 403 - запрещено
RewriteRule ^(.*)$ index.php [F,L]

#ErrorDocument 401 https://younglife.ge/errors/404.php
#ErrorDocument 403 https://younglife.ge/errors/404.php
#ErrorDocument 404 https://younglife.ge/errors/404.php
#ErrorDocument 500 https://younglife.ge/errors/404.php

ServerSignature EMail
SetEnv SERVER_ADMIN admin@younglife.ge